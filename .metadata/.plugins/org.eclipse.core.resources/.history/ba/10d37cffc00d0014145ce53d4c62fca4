 <@layout.global>
 	
 	<@content.main>

		<div id="MISSY_breadcrumb"></div>
		<div id="col3_content" class="clearfix">
			<div class="floatbox"> 
			
				<h1>RDF Validation</h1>
				<p>
					Validation of Constraints on
				</p>
				<ul>
					<li>Web Ontology Language 2 (OWL2)
					<li>Description Set Profiles (DSP)</li>
				</ul>
				
				<img src="<@spring.url '/resources/images/constraint-validation-process.png' />" alt="Constraint Validation Process" style="">
			
			</div>
 		</div>
 		
		<!-- IE clearing - important! -->
		<div id="ie_clearing">&nbsp;</div>
		
 	</@content.main>
 	
</@layout.global>

<script>
	$jQ( function() // begin document ready
	{
		<#-- change the size of main content -->
		$jQ( "#col3" ).css( "margin", "0 0 0 15px");
		// global variable to indicate validation requirements
		validateDatapoint = true;
	
	
	
	<#-- 
	ajax call for saving user inputs in spss import Frequencies on first or second tab
	and get the second or third tab content via ajax
	@param selectorForm     : jquery selector for form submit
	@param selectorCallback : jquery selector for callback content from ajax call
	-->
	function ajaxSpssImportFrequenciesTabContent( selectorForm, selectorCallback ){		
			$jQ.ajax( {
				type: "post",
				url: $jQ( selectorForm ).attr( 'action' ),
				data: $jQ( selectorForm ).serializeArray()
			    })
		    	.done( function( html ) {
		    		$jQ( selectorCallback ).html( html );
				})
		    	.fail( function() {})
		    	.always( function() {
		    	}); //end of ajax call
	}
	
	function changeTabCondition( tabIndex ){
	<#-- the pipeline of the process always move forward -->
		<#-- enable next tab -->
		$jQ( "#updateSpssTabContainer" ).tabs( "enable",  tabIndex );
		$jQ( "#updateSpssTabContainer" ).tabs( { active: tabIndex } );
     	<#-- set previously tab checked -->
     	$jQ( "#updateSpssTabContainer ul li:nth-child(" + tabIndex + ") a span" )
     	.html('<img src="<@spring.url '/resources/images/check_black.png' />" class="checkedTab">');
     	
	}
	
	<#-- function for polling -->
	var refreshIntervalId = null; 	<#-- run condition for traditional polling -->
	
	var loadingTradTimeOut = null;
	
	var tradLineNumber = 0;
	
	function getContentFromFileViaTraditionalPooling( ){
		$jQ('#buttonFrequencyImportDataset')
		.attr( "disabled" , true )
		.removeClass( "buttonSubmit" )
		.addClass( "buttonSubmitDissabled" );
		
		var url = "<@spring.url '/polling/' />" + tradLineNumber;
			
		$jQ.ajax( {
			type: "get",
			url: url
		})
	    .done( function( text ) {
	    	var textSplit = text.split("_#_");
	    	if( text != "" ){
	    		tradLineNumber += textSplit.length;
	    		removeDotLoading( "#text_output" );
	    	}
	    	$jQ.each( textSplit , function( i, val ){
	    		if( val != "" )
	    			$jQ( "#text_output" ).append( '<span class="stat">' + val + "</span>" );
	    		
	    		var divTarea = document.getElementById('text_output');
				divTarea.scrollTop = divTarea.scrollHeight
				
				if( i == textSplit.length - 1 && text != "")
					animateDotLoading( 5, 1000 , "#text_output" );
				
				if( val == "-END-" )
				{
					clearInterval( refreshIntervalId );
					
					removeDotLoading( "#text_output" );
					
					$jQ('#buttonFrequencyImportDataset')
					.attr( "disabled" , false )
					.removeClass( "buttonSubmitDissabled" )
					.addClass( "buttonSubmit" );
				}
	    	});
	    	
		}); //end of ajax call
	}
</script>